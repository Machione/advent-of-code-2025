import pytest

from .puzzle2 import point_inside_polygon, polygon_lines, solve

test_data = """7,1
11,1
11,7
9,7
9,5
2,5
2,3
7,3"""


def test_solve() -> None:
    expected = 24
    actual = solve(test_data)
    assert actual == expected


simple_square = polygon_lines([(10, 10), (20, 10), (20, 20), (10, 20)])


@pytest.mark.parametrize(
    "point,expected",
    [
        ((10, 10), True),
        ((20, 10), True),
        ((20, 20), True),
        ((10, 20), True),
        ((15, 15), True),
        ((9, 10), False),
        ((9, 9), False),
        ((10, 9), False),
        ((20, 9), False),
        ((21, 9), False),
        ((21, 10), False),
        ((21, 20), False),
        ((21, 21), False),
        ((20, 21), False),
        ((10, 21), False),
        ((9, 21), False),
        ((9, 20), False),
        ((11, 10), True),
        ((10, 11), True),
        ((19, 10), True),
        ((20, 11), True),
        ((20, 19), True),
        ((19, 20), True),
        ((11, 20), True),
        ((10, 19), True),
    ],
)
def test_inside(point: tuple[int, int], expected: bool) -> None:
    actual = point_inside_polygon(simple_square, point)
    assert actual == expected


m_polygon = polygon_lines(
    [
        (10, 10),
        (20, 10),
        (20, 20),
        (18, 20),
        (18, 15),
        (15, 15),
        (15, 20),
        (14, 20),
        (14, 15),
        (13, 15),
        (13, 20),
        (12, 20),
        (12, 15),
        (11, 15),
        (11, 20),
        (10, 20),
    ]
)
# ┌─────────┐
# │         │
# │         │
# │         │
# │┌┐┌┐┌──┐ │
# ││││││  │ │
# ││││││  │ │
# ││││││  │ │
# ││││││  │ │
# └┘└┘└┘  └─┘


@pytest.mark.parametrize(
    "point,expected",
    [
        ((9, 9), False),
        ((10, 9), False),
        ((11, 9), False),
        ((12, 9), False),
        ((13, 9), False),
        ((14, 9), False),
        ((15, 9), False),
        ((16, 9), False),
        ((17, 9), False),
        ((18, 9), False),
        ((19, 9), False),
        ((20, 9), False),
        ((21, 9), False),
        ((9, 10), False),
        ((10, 10), True),
        ((11, 10), True),
        ((12, 10), True),
        ((13, 10), True),
        ((14, 10), True),
        ((15, 10), True),
        ((16, 10), True),
        ((17, 10), True),
        ((18, 10), True),
        ((19, 10), True),
        ((20, 10), True),
        ((21, 10), False),
        ((9, 11), False),
        ((10, 11), True),
        ((11, 11), True),
        ((12, 11), True),
        ((13, 11), True),
        ((14, 11), True),
        ((15, 11), True),
        ((16, 11), True),
        ((17, 11), True),
        ((18, 11), True),
        ((19, 11), True),
        ((20, 11), True),
        ((21, 11), False),
        ((9, 12), False),
        ((10, 12), True),
        ((11, 12), True),
        ((12, 12), True),
        ((13, 12), True),
        ((14, 12), True),
        ((15, 12), True),
        ((16, 12), True),
        ((17, 12), True),
        ((18, 12), True),
        ((19, 12), True),
        ((20, 12), True),
        ((21, 12), False),
        ((9, 13), False),
        ((10, 13), True),
        ((11, 13), True),
        ((12, 13), True),
        ((13, 13), True),
        ((14, 13), True),
        ((15, 13), True),
        ((16, 13), True),
        ((17, 13), True),
        ((18, 13), True),
        ((19, 13), True),
        ((20, 13), True),
        ((21, 13), False),
        ((9, 14), False),
        ((10, 14), True),
        ((11, 14), True),
        ((12, 14), True),
        ((13, 14), True),
        ((14, 14), True),
        ((15, 14), True),
        ((16, 14), True),
        ((17, 14), True),
        ((18, 14), True),
        ((19, 14), True),
        ((20, 14), True),
        ((21, 14), False),
        ((9, 15), False),
        ((10, 15), True),
        ((11, 15), True),
        ((12, 15), True),
        ((13, 15), True),
        ((14, 15), True),
        ((15, 15), True),
        ((16, 15), True),
        ((17, 15), True),
        ((18, 15), True),
        ((19, 15), True),
        ((20, 15), True),
        ((21, 15), False),
        ((9, 16), False),
        ((10, 16), True),
        ((11, 16), True),
        ((12, 16), True),
        ((13, 16), True),
        ((14, 16), True),
        ((15, 16), True),
        ((16, 16), False),
        ((17, 16), False),
        ((18, 16), True),
        ((19, 16), True),
        ((20, 16), True),
        ((21, 16), False),
        ((9, 17), False),
        ((10, 17), True),
        ((11, 17), True),
        ((12, 17), True),
        ((13, 17), True),
        ((14, 17), True),
        ((15, 17), True),
        ((16, 17), False),
        ((17, 17), False),
        ((18, 17), True),
        ((19, 17), True),
        ((20, 17), True),
        ((21, 17), False),
        ((9, 18), False),
        ((10, 18), True),
        ((11, 18), True),
        ((12, 18), True),
        ((13, 18), True),
        ((14, 18), True),
        ((15, 18), True),
        ((16, 18), False),
        ((17, 18), False),
        ((18, 18), True),
        ((19, 18), True),
        ((20, 18), True),
        ((21, 18), False),
        ((9, 19), False),
        ((10, 19), True),
        ((11, 19), True),
        ((12, 19), True),
        ((13, 19), True),
        ((14, 19), True),
        ((15, 19), True),
        ((16, 19), False),
        ((17, 19), False),
        ((18, 19), True),
        ((19, 19), True),
        ((20, 19), True),
        ((21, 19), False),
        ((9, 20), False),
        ((10, 20), True),
        ((11, 20), True),
        ((12, 20), True),
        ((13, 20), True),
        ((14, 20), True),
        ((15, 20), True),
        ((16, 20), False),
        ((17, 20), False),
        ((18, 20), True),
        ((19, 20), True),
        ((20, 20), True),
        ((21, 20), False),
        ((9, 21), False),
        ((10, 21), False),
        ((11, 21), False),
        ((12, 21), False),
        ((13, 21), False),
        ((14, 21), False),
        ((15, 21), False),
        ((16, 21), False),
        ((17, 21), False),
        ((18, 21), False),
        ((19, 21), False),
        ((20, 21), False),
        ((21, 21), False),
    ],
)
def test_inside_complex(point: tuple[int, int], expected: bool) -> None:
    actual = point_inside_polygon(m_polygon, point)
    assert actual == expected


island_polygon = polygon_lines(
    [
        (10, 10),
        (20, 10),
        (20, 20),
        (18, 20),
        (18, 15),
        (15, 15),
        (15, 18),
        (18, 18),
        (18, 20),
        (10, 20),
    ]
)
# ┌─────────┐
# │         │
# │         │
# │         │
# │    ┌──┐ │
# │    │  │ │
# │    │  │ │
# │    └──┤ │
# │       │ │
# └───────┴─┘


@pytest.mark.parametrize(
    "point,expected",
    [
        ((9, 9), False),
        ((10, 9), False),
        ((11, 9), False),
        ((12, 9), False),
        ((13, 9), False),
        ((14, 9), False),
        ((15, 9), False),
        ((16, 9), False),
        ((17, 9), False),
        ((18, 9), False),
        ((19, 9), False),
        ((20, 9), False),
        ((21, 9), False),
        ((9, 10), False),
        ((10, 10), True),
        ((11, 10), True),
        ((12, 10), True),
        ((13, 10), True),
        ((14, 10), True),
        ((15, 10), True),
        ((16, 10), True),
        ((17, 10), True),
        ((18, 10), True),
        ((19, 10), True),
        ((20, 10), True),
        ((21, 10), False),
        ((9, 11), False),
        ((10, 11), True),
        ((11, 11), True),
        ((12, 11), True),
        ((13, 11), True),
        ((14, 11), True),
        ((15, 11), True),
        ((16, 11), True),
        ((17, 11), True),
        ((18, 11), True),
        ((19, 11), True),
        ((20, 11), True),
        ((21, 11), False),
        ((9, 12), False),
        ((10, 12), True),
        ((11, 12), True),
        ((12, 12), True),
        ((13, 12), True),
        ((14, 12), True),
        ((15, 12), True),
        ((16, 12), True),
        ((17, 12), True),
        ((18, 12), True),
        ((19, 12), True),
        ((20, 12), True),
        ((21, 12), False),
        ((9, 13), False),
        ((10, 13), True),
        ((11, 13), True),
        ((12, 13), True),
        ((13, 13), True),
        ((14, 13), True),
        ((15, 13), True),
        ((16, 13), True),
        ((17, 13), True),
        ((18, 13), True),
        ((19, 13), True),
        ((20, 13), True),
        ((21, 13), False),
        ((9, 14), False),
        ((10, 14), True),
        ((11, 14), True),
        ((12, 14), True),
        ((13, 14), True),
        ((14, 14), True),
        ((15, 14), True),
        ((16, 14), True),
        ((17, 14), True),
        ((18, 14), True),
        ((19, 14), True),
        ((20, 14), True),
        ((21, 14), False),
        ((9, 15), False),
        ((10, 15), True),
        ((11, 15), True),
        ((12, 15), True),
        ((13, 15), True),
        ((14, 15), True),
        ((15, 15), True),
        ((16, 15), True),
        ((17, 15), True),
        ((18, 15), True),
        ((19, 15), True),
        ((20, 15), True),
        ((21, 15), False),
        ((9, 16), False),
        ((10, 16), True),
        ((11, 16), True),
        ((12, 16), True),
        ((13, 16), True),
        ((14, 16), True),
        ((15, 16), True),
        ((16, 16), False),
        ((17, 16), False),
        ((18, 16), True),
        ((19, 16), True),
        ((20, 16), True),
        ((21, 16), False),
        ((9, 17), False),
        ((10, 17), True),
        ((11, 17), True),
        ((12, 17), True),
        ((13, 17), True),
        ((14, 17), True),
        ((15, 17), True),
        ((16, 17), False),
        ((17, 17), False),
        ((18, 17), True),
        ((19, 17), True),
        ((20, 17), True),
        ((21, 17), False),
        ((9, 18), False),
        ((10, 18), True),
        ((11, 18), True),
        ((12, 18), True),
        ((13, 18), True),
        ((14, 18), True),
        ((15, 18), True),
        ((16, 18), True),
        ((17, 18), True),
        ((18, 18), True),
        ((19, 18), True),
        ((20, 18), True),
        ((21, 18), False),
        ((9, 19), False),
        ((10, 19), True),
        ((11, 19), True),
        ((12, 19), True),
        ((13, 19), True),
        ((14, 19), True),
        ((15, 19), True),
        ((16, 19), True),
        ((17, 19), True),
        ((18, 19), True),
        ((19, 19), True),
        ((20, 19), True),
        ((21, 19), False),
        ((9, 20), False),
        ((10, 20), True),
        ((11, 20), True),
        ((12, 20), True),
        ((13, 20), True),
        ((14, 20), True),
        ((15, 20), True),
        ((16, 20), True),
        ((17, 20), True),
        ((18, 20), True),
        ((19, 20), True),
        ((20, 20), True),
        ((21, 20), False),
        ((9, 21), False),
        ((10, 21), False),
        ((11, 21), False),
        ((12, 21), False),
        ((13, 21), False),
        ((14, 21), False),
        ((15, 21), False),
        ((16, 21), False),
        ((17, 21), False),
        ((18, 21), False),
        ((19, 21), False),
        ((20, 21), False),
        ((21, 21), False),
    ],
)
def test_inside_island(point: tuple[int, int], expected: bool) -> None:
    actual = point_inside_polygon(island_polygon, point)
    assert actual == expected
